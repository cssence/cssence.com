<!DOCTYPE html>
<html lang="en" class="c-essay">
<head>
<title>Say “Hello” to Device Fragmentation</title>
<meta name="description" content="How to show your alternate designs.">
<link rel="alternate" type="text/html" href="http://cssence.wordpress.com/2011/02/26/alternate-stylesheet/" title="Article on cssence.wordpress.com">
</head>
<body>
<main>
<article>
<header>
<h1>Say “Hello” to Device Fragmentation</h1>
<p><i>Essay</i><br><time>2011-02-26T21:18:05Z</time><br><img src="/2011/alternate-stylesheet/index.png" alt=""></p>
</header>
<div>
<aside class="standoff" aria-labelledby="introduction">
<h2 id="introduction">Introduction</h2>
<p>Learn how alternate style sheets (that have been with us for many years now) can be put to good use today. Websites no longer have just one design, they come with additional designs created for special purposes, such as mobiles phones. Why hide them?</p>
</aside>
<p>There is a mobile revolution going on. More and more websites are becoming mobile friendly. Also, devices are getting better and better.</p>
<p>The ones in our pockets no longer (more like <a href="http://www.engadget.com/2007/01/09/the-apple-iphone/">never started to</a>) define themselves as handhelds, at least when it comes to something called the <em>media type</em>. Because their web browsers are as good as desktop browsers, they decided they might as well embrace the full web. So they keep telling us: <code>media=&quot;screen&quot;</code>.</p>
<p>To cope with this fact, there is a lot of server-side user agent sniffing going on today. UAsmell, <span lang="la">ergo sum.</span> I <a href="http://wurfl.sourceforge.net/">wurfl</a>, therefore I am. After some magic, the user gets the right CSS, the one that makes the site look good on the device.</p>
<h2>Mobile view, desktop view</h2>
<p>But not always. Even if we get the sniffing right, the user may still want to see the full page. So it is a good idea to provide a link to the full version of your site. Follow the link and you get the full site. No more sniffing is done, otherwise you’d bump into the mobile version again.</p>
<p><img src="/2011/alternate-stylesheet/engadget-desktop.png" alt="m.engadget.com has a link labeled “Desktop” at the bottom of their site, that leads to their full site."></p><!-- Link at m.engadget.com, leading to their full site -->
<p>Many websites already do that, e.g., <a href="http://m.engadget.com/">engadget</a>. Whenever you decide to provide a mobile version, you should include such a link. Users usually expect it at the bottom of the page. Good practice.</p>
<p>For a recent project I designed more than just one zoom-friendly liquid design. Different styles for different devices. Mainly to get a similar look across all mobiles, no matter what size and pixel density they might have. All the way up to the retina display. So next to the desktop version, there has been a style for the Apple iPad, and many more in order to satisfy every mobile phone with a significant market share. Alright, just Android and iOS have been in the mix. Anyway, on top of that, all of them made good use of the screen estate in landscape and portrait mode, thanks to media queries.</p>
<p>I ended up with all the things I just mentioned. User agent sniffing to identify my target devices, they will get a special treat. And a liquid design for everything else. My work has been done.</p>
<p>Right, the work has already been done. Why not spread the word? If Mobile should provide a link to Desktop, why not go the other way around?</p>
<h2>Desktop view, any view</h2>
<p>Maybe there are people in front of a PC or Mac who would enjoy a “mobile” layout in their regular web browser. Maybe one of the alternate designs would make more sense to them than the main one. Enjoy the one designed for the iPad in Firefox … why not?</p>
<p>Who knows. All you know for sure is that there are a gazillion screens. So many form factors. Some have touch input, others don’t. Whatever, for once, let’s give our regular visitors a choice.</p>
<h2>Alternate style sheets</h2>
<p>We start by adding all the designs we already have as alternate style sheets. There is nothing fancy about this. Frankly, that technique is quite old. <a href="http://www.alistapart.com/articles/alternate/">Check out alistapart</a> to see how it is done. But be careful. That link takes you right back to 2001. You’ve been warned.</p>
<p>I add the alternate style sheets only to the desktop version, because currently I do not see how to make use of them on a phone. Okay, all my additional designs are defined as alternate style sheets. Now what? Take Firefox. This browser lists our alternate style sheets and let’s you choose the page style. You could even look at the page with no style at all.</p>
<p><img src="/2011/alternate-stylesheet/firefox-page-style.png" alt="Firefox allows you to change the page style in the menu under View &gt; Page Style."></p>
<p>Sure, this may be good enough for tech-savvy web surfers with a capable browser, but who’s going to check if there are alternate style sheets‽ Next stop: JavaScript. You can provide a style sheet switcher, as <a href="http://css-tricks.com/examples/AlternateStyleSheets">seen on css-tricks.com</a>. With the switcher in place, visitors have a visual cue to stumble upon. And if they make an alternate choice, this choice can be made permanent with cookies, for future visits.</p>
<h2>A few things to consider</h2>
<p><strong>Doesn’t this approach require you to have your styles separated?</strong> First of all: I encourage you to separate styles. Mobile users are happy when they get their pages fast. Please do not deliver stuff to them that belong to your desktop version. Mobile bandwidth is precious (and sometimes expensive). Also, as <a href="http://24ways.org/2010/life-beyond-media-queries">Sarah Parmenter pointed out</a>, some phones may load more than you ever get to see.</p>
<p>But all this doesn’t necessary lead to code duplication. If your style sheet’s <code>link</code> tag lacks a <code>title</code> attribute, the contained styles will always be applied, no matter what alternate style sheet the user chooses. So you can put your common CSS there. And as always, the style sheets themselves may include others. But sure, for this to work, you need all the referenced .css files as defined in the HTML file, since this is the only place to distinguish between alternate style sheets.</p>
<p><strong>More .css files, more HTTP requests!</strong> True. But this is one of the few topics where I cannot recommend reducing them. JavaScript aside, you’ll end up with at least one .css file for each version of your site. To get there, instead of using <code>@include</code>s, your server probably needs to pour the shared code in each of said files. Not good. Because some browsers prefetch all alternate style sheets, that way any performance boost you’ll get from fewer HTTP requests is gone.</p>
<p><strong>What about things that won’t work on the desktop browser, like using a vendor-prefixed media query such as <code>-webkit-min-device-pixel-ratio</code>?</strong> Well, once you’ve separated the styles (maybe you’ve got an iphone.css and a retina.css) this query may become obsolete. But you’ll have to look at each situation individually. It will be easier if you are able to plan ahead. If you already know right at the start of a project that you’re going to add your other designs as alternate style sheets to your desktop version, you will most likely choose to implement media queries in a different way.</p>
<p>Empower the desktop version of your site! Let the user decide about the design.</p>
</div>
<aside>
<h2 id="comments">Comments</h2>
<article hidden>
<h3><span data-href="https://twitter.com/CSSence/status/42351635766317056"><b>Matthias Beitl</b> wrote on <time>2011-02-28T22:33:11Z</time></span></h3>
<p>New issue of CSSence - <a href="/2011/alternate-stylesheet/">j.mp/e01C8E</a> - Show your alternate designs</p>
</article>
<p>No comments have been added so far.</p>
</aside>
</article>
</main>
</body>
</html>
